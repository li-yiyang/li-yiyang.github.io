<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <title>Fibonacci Computer Emulator</title>

    <link rel="stylesheet" type="text/css" href="style/style.css">

    <script src='app/jquery-3.3.1.min.js'></script> 
    <script type="text/javascript" src="app/main.js"></script>
  </head>
  <body>
    <h1>Fibonacci Computer & りlang : Ruby</h1>
    <div class="box">
      <strong>Code</strong><button id="compile">Compiler</button><br>
      <textarea class="codebox" id="rilang">Input your code. </textarea>
    </div>
    <div class="box">
      <strong>ASM Code</strong><button id="load">LOAD</button><br>
      <textarea class="codebox" id="code">Or just input assemble code. </textarea>
      <br>
    </div>
    <div class="box">
      <strong>Controls</strong>
      <button id="step">STEP</button>
      <button id="run">RUN</button>
      <br>
      <div id="loaded_code">
      </div>
    </div>
    <div class="box">
      <strong>Memories</strong><button id="memory">LOAD MEMORY</button>
      <div class="message" id="memories"></div>
    </div>
    <div class="box">
      <strong>Ref</strong><br>
      <div class="message">
        <details>
          <summary>About the りlang</summary>
          <div>(add 1 3 (sub 3 4 (mul 2 6) (div 9 3))) # calculate</div>
          <div>(let x 2)(let y (add 1 3)) # assign variable</div>
          <div>
            (def (f arg1 arg2) (mul arg1 arg2))<br>
            (def (f arg) (proc (mul arg 3) (mul arg 2)))<br>
            # define functions, note that the last expression is the return value. 
          </div>
          <div>(proc (exp) (exp) (exp)) # a list of processing expression</div>
          <div>(if (condition) (true_bench) (false_bench)) # condition test</div>
          <div>(f arg1 arg2) # function calls</div>
        </details>
        <details>
          <summary>About the Assemble Code.</summary>
          <div>MOV [source], [destination] # mov source to destination</div>
          <div>LEA [source], [destination] # load the effect value stored 
            in source address to destination</div>
          <br>
          <div>ADD [source], [destination] # add source to destination</div>
          <div>SUB [source], [destination] # sub destination by source</div>
          <div>MUL [source], [destination] # multiply destination with source</div>
          <div>DIV [source], [destination] # divide destination by source, 
            note that if you divide by zero, the result would be zero. </div>
          <br>
          <div>INC [destination] # increase by one</div>
          <div>DEC [destination] # decrease by one</div>
          <br>
          <div>CMP [a], [b] # b - a -&gt; FLAG</div>
          <div>J<CONDITION>  [tag]    # jl if FLAG &lt; 0, je if =</div>
          <br>
          <div>PUSH [value] # push value to stack</div>
          <div>POP [register] # pop value in stack to register</div>
          <br>
          <div>HALT # stop the computer</div>
          <div>NOP # do nothing</div>
        </details>
      </div>
    </div>
    <div class="box">
      <strong>About</strong>
      <div class="message">
        <details>
          <summary>Original</summary>
          This project was originally from my computer class, 
          which is called Fibonacci Computer. However, in the 
          class, the teacher only told us that we, human should 
          perform the assemble-like code, which I thought was 
          terrible. <br>
          Therefore, I made this toy machine to help me with
          those codes. And because the original one does not
          support many features a real computer would have, so
          I made a few changes on it. <br>
          If you want to use the original version, please see
          my old one. <br>
          And I'm working on a compiler for it. <br>
        </details>
        <br>
        <details>
          <summary>The Story behind the りlang</summary>
          The りlang is a toy computer programming language, which
          uses the S-expression to cut down the parser work. It's 
          name cames from the first syllable of my nickname "凉凉"
          in Hiragana. 
          <br>
          (p.s. my real name also starts with this syllable. )
          <br>
          The most hard thing most be the design of its compiler, 
          which took me a week or so to do so. 
        </details>
        <br>
        <details>
          <summary>It is imperfect. </summary>
          This would be the version 0.0. Still, there is some
          error hiding somewhere else. Hopefully, I will 
          find them out and make it done. 
        </details>
        Author: <a href="https://li-yiyang.github.io">凉凉</a><br>
      </div>
    </div>
    <script src="test.js"></script>
  </body>
</html>
