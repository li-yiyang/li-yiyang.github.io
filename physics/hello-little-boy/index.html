<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>你好, 小朋友, 请问你们知道降噪耳机吗? | My Blog</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="你好, 小朋友, 请问你们知道降噪耳机吗?" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="About 先别问小朋友们知不知道, 总之先给我来张 Silence 卡, 对, 就是小樱那张. 和吃席坐小孩那桌相对的估计就是坐车和小孩一车吧. 而我的更离谱一些, 我是和一车小孩&#8230; 算了, 再多熬一会儿, 等我耳机充完电就好&#8230; 所以这篇文章只会是一个非常短小的科普文章. 逆转降噪耳机 大多数人可能会因为 &#8220;降噪耳机&#8221; 万分吸引人的名字而尝试入手, 然后在经历现实拷打之后大喊 &#8220;退钱!&#8221;. 但是我要说: &#8220;異議あり!&#8221;, 这可真的是误会它了. 当然, 为了防止刚来的吃瓜群众不太清楚事情的前因后果, 我们还是来简单地介绍一下案情吧: 被告降噪耳机以 &#8220;主动式&#8221; 降噪为主要卖点, 因为使用效果不佳而被我们的原告: Silence 库洛牌告上了我们的离谱法庭, 罪名为不能让自己在周围吵闹的环境里面安静地享受. Silence: 这家伙虽然让我听不见了列车的嗡嗡声, 但是根本没有减少那帮小祖宗, 那帮扬声器们的声波武器! 很遗憾, 但是这就是事实, 主动式降噪耳机是有极限的. 所以我不做&#8230; 虽然能, 但是并不是万能, 也不是一定能. 这是因为&#8230; 你先别急, 听我狡辩 在这里我们先介绍两个简单的前置知识: 听到声音是空气的振动作用在鼓膜上, 使得神经细胞受到刺激最终在大脑得到信号的一个过程. 为了描述最简单的振动我们可以用 \(&sum;_{&omega;} A sin (&omega; t + \varphi_s) + B cos (&omega; t + \varphi_c)\), 也就是三角函数的形式来描述. 用一个最简单的振动 \(A sin &omega; t\) 来作为例子来解释上面的两个知识点: 在鼓膜 (耳朵) 边上的空气被压缩又膨胀, 就像是一根弹簧一样推动着鼓膜振动. 那么如果想要不听到声音, 只要在声音传播的这条路上埋伏起来偷袭就好了: 比如我们可以跑到真空中, 这个时候, 作为声音传播媒介的空气就消失了, 自然就一点也听不见了. 虽然这个时候你可能不太舒服, 但你就说这是不是消失了呢. 当然, 其他的一些操作可能过于地狱了一些, 不适合作为给小朋友的介绍, 还是算了. (比如由于鼓膜老化, 破裂等造成空气的振动无法转换为鼓膜的振动; 又或者是鼓膜到大脑的神经链路因为各种原因而损坏等等) 显然, 我们的目标应当是尽可能简单而无副作用地实现消除噪音的愿望, 毕竟这可不是啥猿猴之手呢. 所以最合理的做法就是切断在空气中的传播路径. 想要切断空气中的传播路径, 最简单的方法就是用手或者其他的东西将耳朵捂起来. 这就是 &#8220;被动式&#8221; 的降噪耳机的思路: 如何构造并选择更好的结构来使得外界的声音更难传入. 而相比被动式降噪耳机, 主动式降噪耳机的思路就是 \(A sin (&omega; t) + A sin (&omega; t + k &pi;) = 0\). 用一个不太合理的图像来表示就是: 两个小孩在拉东西, 假如这两个小孩用的力气相等, 用的方向又时时刻刻相反, 嘿, 今天就是天皇老子驾到, 你也别想这东西能被拉动. 于是稍微复杂一些, 如果现在的振动模式变成了 \(A_1 sin (&omega;_1 t + \varphi_2) + A_2 sin (&omega;_2 t + \varphi_2)\), 那么如果想要消除 \(&omega;_2\) 频率的分量, 那么只需要引入一个新的振动 \(A_3 sin (&omega;_3 t + \varphi_3)\), 使得 \(A_2 = A_3, &omega;_2 = &omega;_3, |\varphi_2 - \varphi_3| = k &pi;\), 于是合成的结果就是 \(A_1 sin (&omega;_1 t + \varphi_2)\). 那么能不能更加复杂一些呢? 如果现在的振动模式变成了: \[&int;_0^{&infin;} A(&omega;) sin(&omega; t + \varphi(&omega;)) \mathrm{d}&omega;\] 如果想要消除频率区间为 \([&omega;_1, &omega;_2]\) 的振动分量, 那么只需要添加如下的振动模式即可: \[&int;_{&omega;_1}^{&omega;_2} A(&omega;) sin(&omega; t + \varphi(&omega;) + &pi;) \mathrm{d}&omega;\] Silence: 那不是超级简单吗? 你这个骗子! 我现在外面这些声音, 可是一丁点都不想听见, 请将频率区间 \([0, &infin;]\) 的都给我去掉! 你说的对, 但是降噪耳机是&#8230; 理论上是这样的, 但是上面只不过是降噪耳机原理中的冰山一角而已. 因为首先我们就要遇到的一个问题是: 我们周围的声音振动, 对我们来说, 更像是一个时间上连续变化的信息 \(A(t)\). 我们并不 (能直接) 知道它是由什么频率的什么分量组成的. 理论很美好, 现实很骨感, 首先, 为了能够得到量化可计算的 \(A(t)\), 我们需要一个麦克风. 而沉重的现实打击就已经从这里开始了: 正如人耳对过高频率和过低频率的声音并不敏感, 甚至会出现截止现象 (超声波和次声波听不见), 大多数麦克风对于不同频率的相应并不相同. 尽管我们可以通过标定输入测量一条频响曲线, 从而对不同频率给予一个修正系数. 关于修正系数的一个无关的例子 因为我也不是搞这个的, 所以没啥好的例子. 一个相近的例子为我在近代物理实验里面的滤波器的测量: 让我来解释一下这个图吧. 当时需要标定一下仪器 (滤波器), 然后就用一个标准输出 (函数发生器) 以相同幅度和不同频率作为输入, 用示波器测量输出, 得到了这张图片. 根据频响曲线, 就可以反推在某频率上测量的实际输入值, 也就是乘/除以一个增益系数. 梦里的滤波器应该是一个直上直下的平台, 除了边缘, 其他地方不是 0 就是 1. 显然, 我手上测的这个是个现实的滤波器. 那么滤波器和麦克风又有啥关系呢? 我觉得可以把麦克风看作是一种特殊的滤波器, 只不过理想的麦克风应该是一个平台无限宽, 高度恒为 1 的平台. 显然, 现实还是很骨感的. 并且这个频率相应的限制因素估计不仅仅是电子学的, 可能还有机械结构上的限制. 不过这个我就不太会了. 一个修正系数的直观例子如下: 假如输入信号为 \(100\), 经过麦克风拾取的强度为 \(99\), 那么就可以认为修正所需的系数为 \(\frac{100}{99} &asymp; 1.0101\). 但是如果拾取的强度太弱, 譬如 \(100 &rarr; 0.5 &plusmn; 0.5\) 甚至更弱, 那么最终的结果就是, 在这里为了保证信号的正常, 必需做一个截断防止出现问题. 而在好不容易拿到声音信号 \(A(t)\) 之后, 一个更加麻烦的问题出现了, 我们好像还需要从中提取出频率 (空间) 的信息. 当然, 这个不会是本次的重点, 好奇的小朋友可以去看之前的文章: 舌头大姐了&#8230;, 一个剧透就是好用的傅里叶变换. 真正重点的是, 我们该如何使用傅里叶变换. 举个例子, 教科书中的傅里叶变换: \[\mathcal{F}(f) = &int;_{\mathcal{D}} \frac{1}{2 &pi;} f(x) e^{- i k x} \mathrm{d} x\] 其中 \(\mathcal{D}\) 为值域 (一般为 \((- &infin;, + &infin;)\), 也可对非无穷大值域做延拓). 但是这样就会要求知道整个值域的信息 &#8211; 这可是非常离谱的事情, 想要消除声音, 竟然要等到听完所有声音信息后才能消除&#8230; 这不就是小学生的选择性失聪嘛 于是这个时候的一个妥协的方法就是只对一小部分进行傅里叶变换, 即把要消除的声音切做细细的一个个片段, 对每一部分进行傅里叶变换, 然后根据提取的频域信息去消除对应的小片段的声音. 当然, 这样的做法其实还需要一些小小的讨论, 只是在这里先跳过先. 那么理想的情况下, 只要令这个小片段的时间宽度尽可能的短, 那么降噪的实时性应该就会更好. 然而事实是, 我们还有需要妥协的问题: 假如选择的时间宽度 \(&tau;\) 过短, 因为采样率限制导致波形的分辨率不足而导致失真, 这样则太尴尬了. 关于分辨率的一些无关注记 说道分辨率就让我想到示波器, 测量的时候, 理应采样率应该是 \(&times; 10^3\) 倍于被采样的信号. 显然, 如果真的有这么强的示波器的话, 哪怕是一些原理看上去非常 low 的: 利用区间速度逼近瞬时速度的挡板法测斜坡上的小车速度, 也能够变得非常强, 比如在近物所的环形加速器上按了两个探测器来检测重离子经过 &#8211; 大概是 \(\mathrm{n}s\) 量级的一个分辨率 (具体我记不清楚了, 诶, 属于是听讲座不用心, 不过应该会更小一些). 并且时间宽度 \(&tau;\) 也应当和计算时间 \(&tau;_{\mathrm{c}}\) 相匹配, 尽管我不知道具体的实现方式应该是啥. 这里我提供一个非常简单的朴素想法: 认为在 \(t\) 周围 \(&lambda; &tau;\) 的一个领域里面, 认为振动的模式是相似的, 于是可以认为, 若 \(&tau;_c &lt; &lambda; &tau;\), 那么就认为它还算是可以降噪吧. 于是这里就对计算时间和时间宽度之间加了一个限制, 想要消除更高频率的声音, 就应当让 \(&tau;\) 更小, 于是就变相要求 \(&tau;_{\mathrm{c}}\) 更小, 就要有更加快速的芯片 (估计可能会有更高的功率消耗, 使得电池电量减少, 毕竟我看我可怜的耳机从电池仓里出来都是红温的 (热的)&#8230;) 大概就这样吧, 一下车心情都好了, 也就不咋想吐槽了. The End 画饼 目前手头在忙别的一个东西, 等完成了之后, 想要用 CFFI 来调用 FFTW 写一个简单的小程序." />
<meta property="og:description" content="About 先别问小朋友们知不知道, 总之先给我来张 Silence 卡, 对, 就是小樱那张. 和吃席坐小孩那桌相对的估计就是坐车和小孩一车吧. 而我的更离谱一些, 我是和一车小孩&#8230; 算了, 再多熬一会儿, 等我耳机充完电就好&#8230; 所以这篇文章只会是一个非常短小的科普文章. 逆转降噪耳机 大多数人可能会因为 &#8220;降噪耳机&#8221; 万分吸引人的名字而尝试入手, 然后在经历现实拷打之后大喊 &#8220;退钱!&#8221;. 但是我要说: &#8220;異議あり!&#8221;, 这可真的是误会它了. 当然, 为了防止刚来的吃瓜群众不太清楚事情的前因后果, 我们还是来简单地介绍一下案情吧: 被告降噪耳机以 &#8220;主动式&#8221; 降噪为主要卖点, 因为使用效果不佳而被我们的原告: Silence 库洛牌告上了我们的离谱法庭, 罪名为不能让自己在周围吵闹的环境里面安静地享受. Silence: 这家伙虽然让我听不见了列车的嗡嗡声, 但是根本没有减少那帮小祖宗, 那帮扬声器们的声波武器! 很遗憾, 但是这就是事实, 主动式降噪耳机是有极限的. 所以我不做&#8230; 虽然能, 但是并不是万能, 也不是一定能. 这是因为&#8230; 你先别急, 听我狡辩 在这里我们先介绍两个简单的前置知识: 听到声音是空气的振动作用在鼓膜上, 使得神经细胞受到刺激最终在大脑得到信号的一个过程. 为了描述最简单的振动我们可以用 \(&sum;_{&omega;} A sin (&omega; t + \varphi_s) + B cos (&omega; t + \varphi_c)\), 也就是三角函数的形式来描述. 用一个最简单的振动 \(A sin &omega; t\) 来作为例子来解释上面的两个知识点: 在鼓膜 (耳朵) 边上的空气被压缩又膨胀, 就像是一根弹簧一样推动着鼓膜振动. 那么如果想要不听到声音, 只要在声音传播的这条路上埋伏起来偷袭就好了: 比如我们可以跑到真空中, 这个时候, 作为声音传播媒介的空气就消失了, 自然就一点也听不见了. 虽然这个时候你可能不太舒服, 但你就说这是不是消失了呢. 当然, 其他的一些操作可能过于地狱了一些, 不适合作为给小朋友的介绍, 还是算了. (比如由于鼓膜老化, 破裂等造成空气的振动无法转换为鼓膜的振动; 又或者是鼓膜到大脑的神经链路因为各种原因而损坏等等) 显然, 我们的目标应当是尽可能简单而无副作用地实现消除噪音的愿望, 毕竟这可不是啥猿猴之手呢. 所以最合理的做法就是切断在空气中的传播路径. 想要切断空气中的传播路径, 最简单的方法就是用手或者其他的东西将耳朵捂起来. 这就是 &#8220;被动式&#8221; 的降噪耳机的思路: 如何构造并选择更好的结构来使得外界的声音更难传入. 而相比被动式降噪耳机, 主动式降噪耳机的思路就是 \(A sin (&omega; t) + A sin (&omega; t + k &pi;) = 0\). 用一个不太合理的图像来表示就是: 两个小孩在拉东西, 假如这两个小孩用的力气相等, 用的方向又时时刻刻相反, 嘿, 今天就是天皇老子驾到, 你也别想这东西能被拉动. 于是稍微复杂一些, 如果现在的振动模式变成了 \(A_1 sin (&omega;_1 t + \varphi_2) + A_2 sin (&omega;_2 t + \varphi_2)\), 那么如果想要消除 \(&omega;_2\) 频率的分量, 那么只需要引入一个新的振动 \(A_3 sin (&omega;_3 t + \varphi_3)\), 使得 \(A_2 = A_3, &omega;_2 = &omega;_3, |\varphi_2 - \varphi_3| = k &pi;\), 于是合成的结果就是 \(A_1 sin (&omega;_1 t + \varphi_2)\). 那么能不能更加复杂一些呢? 如果现在的振动模式变成了: \[&int;_0^{&infin;} A(&omega;) sin(&omega; t + \varphi(&omega;)) \mathrm{d}&omega;\] 如果想要消除频率区间为 \([&omega;_1, &omega;_2]\) 的振动分量, 那么只需要添加如下的振动模式即可: \[&int;_{&omega;_1}^{&omega;_2} A(&omega;) sin(&omega; t + \varphi(&omega;) + &pi;) \mathrm{d}&omega;\] Silence: 那不是超级简单吗? 你这个骗子! 我现在外面这些声音, 可是一丁点都不想听见, 请将频率区间 \([0, &infin;]\) 的都给我去掉! 你说的对, 但是降噪耳机是&#8230; 理论上是这样的, 但是上面只不过是降噪耳机原理中的冰山一角而已. 因为首先我们就要遇到的一个问题是: 我们周围的声音振动, 对我们来说, 更像是一个时间上连续变化的信息 \(A(t)\). 我们并不 (能直接) 知道它是由什么频率的什么分量组成的. 理论很美好, 现实很骨感, 首先, 为了能够得到量化可计算的 \(A(t)\), 我们需要一个麦克风. 而沉重的现实打击就已经从这里开始了: 正如人耳对过高频率和过低频率的声音并不敏感, 甚至会出现截止现象 (超声波和次声波听不见), 大多数麦克风对于不同频率的相应并不相同. 尽管我们可以通过标定输入测量一条频响曲线, 从而对不同频率给予一个修正系数. 关于修正系数的一个无关的例子 因为我也不是搞这个的, 所以没啥好的例子. 一个相近的例子为我在近代物理实验里面的滤波器的测量: 让我来解释一下这个图吧. 当时需要标定一下仪器 (滤波器), 然后就用一个标准输出 (函数发生器) 以相同幅度和不同频率作为输入, 用示波器测量输出, 得到了这张图片. 根据频响曲线, 就可以反推在某频率上测量的实际输入值, 也就是乘/除以一个增益系数. 梦里的滤波器应该是一个直上直下的平台, 除了边缘, 其他地方不是 0 就是 1. 显然, 我手上测的这个是个现实的滤波器. 那么滤波器和麦克风又有啥关系呢? 我觉得可以把麦克风看作是一种特殊的滤波器, 只不过理想的麦克风应该是一个平台无限宽, 高度恒为 1 的平台. 显然, 现实还是很骨感的. 并且这个频率相应的限制因素估计不仅仅是电子学的, 可能还有机械结构上的限制. 不过这个我就不太会了. 一个修正系数的直观例子如下: 假如输入信号为 \(100\), 经过麦克风拾取的强度为 \(99\), 那么就可以认为修正所需的系数为 \(\frac{100}{99} &asymp; 1.0101\). 但是如果拾取的强度太弱, 譬如 \(100 &rarr; 0.5 &plusmn; 0.5\) 甚至更弱, 那么最终的结果就是, 在这里为了保证信号的正常, 必需做一个截断防止出现问题. 而在好不容易拿到声音信号 \(A(t)\) 之后, 一个更加麻烦的问题出现了, 我们好像还需要从中提取出频率 (空间) 的信息. 当然, 这个不会是本次的重点, 好奇的小朋友可以去看之前的文章: 舌头大姐了&#8230;, 一个剧透就是好用的傅里叶变换. 真正重点的是, 我们该如何使用傅里叶变换. 举个例子, 教科书中的傅里叶变换: \[\mathcal{F}(f) = &int;_{\mathcal{D}} \frac{1}{2 &pi;} f(x) e^{- i k x} \mathrm{d} x\] 其中 \(\mathcal{D}\) 为值域 (一般为 \((- &infin;, + &infin;)\), 也可对非无穷大值域做延拓). 但是这样就会要求知道整个值域的信息 &#8211; 这可是非常离谱的事情, 想要消除声音, 竟然要等到听完所有声音信息后才能消除&#8230; 这不就是小学生的选择性失聪嘛 于是这个时候的一个妥协的方法就是只对一小部分进行傅里叶变换, 即把要消除的声音切做细细的一个个片段, 对每一部分进行傅里叶变换, 然后根据提取的频域信息去消除对应的小片段的声音. 当然, 这样的做法其实还需要一些小小的讨论, 只是在这里先跳过先. 那么理想的情况下, 只要令这个小片段的时间宽度尽可能的短, 那么降噪的实时性应该就会更好. 然而事实是, 我们还有需要妥协的问题: 假如选择的时间宽度 \(&tau;\) 过短, 因为采样率限制导致波形的分辨率不足而导致失真, 这样则太尴尬了. 关于分辨率的一些无关注记 说道分辨率就让我想到示波器, 测量的时候, 理应采样率应该是 \(&times; 10^3\) 倍于被采样的信号. 显然, 如果真的有这么强的示波器的话, 哪怕是一些原理看上去非常 low 的: 利用区间速度逼近瞬时速度的挡板法测斜坡上的小车速度, 也能够变得非常强, 比如在近物所的环形加速器上按了两个探测器来检测重离子经过 &#8211; 大概是 \(\mathrm{n}s\) 量级的一个分辨率 (具体我记不清楚了, 诶, 属于是听讲座不用心, 不过应该会更小一些). 并且时间宽度 \(&tau;\) 也应当和计算时间 \(&tau;_{\mathrm{c}}\) 相匹配, 尽管我不知道具体的实现方式应该是啥. 这里我提供一个非常简单的朴素想法: 认为在 \(t\) 周围 \(&lambda; &tau;\) 的一个领域里面, 认为振动的模式是相似的, 于是可以认为, 若 \(&tau;_c &lt; &lambda; &tau;\), 那么就认为它还算是可以降噪吧. 于是这里就对计算时间和时间宽度之间加了一个限制, 想要消除更高频率的声音, 就应当让 \(&tau;\) 更小, 于是就变相要求 \(&tau;_{\mathrm{c}}\) 更小, 就要有更加快速的芯片 (估计可能会有更高的功率消耗, 使得电池电量减少, 毕竟我看我可怜的耳机从电池仓里出来都是红温的 (热的)&#8230;) 大概就这样吧, 一下车心情都好了, 也就不咋想吐槽了. The End 画饼 目前手头在忙别的一个东西, 等完成了之后, 想要用 CFFI 来调用 FFTW 写一个简单的小程序." />
<link rel="canonical" href="/physics/hello-little-boy/" />
<meta property="og:url" content="/physics/hello-little-boy/" />
<meta property="og:site_name" content="My Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-07-14T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="你好, 小朋友, 请问你们知道降噪耳机吗?" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-07-14T00:00:00+00:00","datePublished":"2023-07-14T00:00:00+00:00","description":"About 先别问小朋友们知不知道, 总之先给我来张 Silence 卡, 对, 就是小樱那张. 和吃席坐小孩那桌相对的估计就是坐车和小孩一车吧. 而我的更离谱一些, 我是和一车小孩&#8230; 算了, 再多熬一会儿, 等我耳机充完电就好&#8230; 所以这篇文章只会是一个非常短小的科普文章. 逆转降噪耳机 大多数人可能会因为 &#8220;降噪耳机&#8221; 万分吸引人的名字而尝试入手, 然后在经历现实拷打之后大喊 &#8220;退钱!&#8221;. 但是我要说: &#8220;異議あり!&#8221;, 这可真的是误会它了. 当然, 为了防止刚来的吃瓜群众不太清楚事情的前因后果, 我们还是来简单地介绍一下案情吧: 被告降噪耳机以 &#8220;主动式&#8221; 降噪为主要卖点, 因为使用效果不佳而被我们的原告: Silence 库洛牌告上了我们的离谱法庭, 罪名为不能让自己在周围吵闹的环境里面安静地享受. Silence: 这家伙虽然让我听不见了列车的嗡嗡声, 但是根本没有减少那帮小祖宗, 那帮扬声器们的声波武器! 很遗憾, 但是这就是事实, 主动式降噪耳机是有极限的. 所以我不做&#8230; 虽然能, 但是并不是万能, 也不是一定能. 这是因为&#8230; 你先别急, 听我狡辩 在这里我们先介绍两个简单的前置知识: 听到声音是空气的振动作用在鼓膜上, 使得神经细胞受到刺激最终在大脑得到信号的一个过程. 为了描述最简单的振动我们可以用 \\(&sum;_{&omega;} A sin (&omega; t + \\varphi_s) + B cos (&omega; t + \\varphi_c)\\), 也就是三角函数的形式来描述. 用一个最简单的振动 \\(A sin &omega; t\\) 来作为例子来解释上面的两个知识点: 在鼓膜 (耳朵) 边上的空气被压缩又膨胀, 就像是一根弹簧一样推动着鼓膜振动. 那么如果想要不听到声音, 只要在声音传播的这条路上埋伏起来偷袭就好了: 比如我们可以跑到真空中, 这个时候, 作为声音传播媒介的空气就消失了, 自然就一点也听不见了. 虽然这个时候你可能不太舒服, 但你就说这是不是消失了呢. 当然, 其他的一些操作可能过于地狱了一些, 不适合作为给小朋友的介绍, 还是算了. (比如由于鼓膜老化, 破裂等造成空气的振动无法转换为鼓膜的振动; 又或者是鼓膜到大脑的神经链路因为各种原因而损坏等等) 显然, 我们的目标应当是尽可能简单而无副作用地实现消除噪音的愿望, 毕竟这可不是啥猿猴之手呢. 所以最合理的做法就是切断在空气中的传播路径. 想要切断空气中的传播路径, 最简单的方法就是用手或者其他的东西将耳朵捂起来. 这就是 &#8220;被动式&#8221; 的降噪耳机的思路: 如何构造并选择更好的结构来使得外界的声音更难传入. 而相比被动式降噪耳机, 主动式降噪耳机的思路就是 \\(A sin (&omega; t) + A sin (&omega; t + k &pi;) = 0\\). 用一个不太合理的图像来表示就是: 两个小孩在拉东西, 假如这两个小孩用的力气相等, 用的方向又时时刻刻相反, 嘿, 今天就是天皇老子驾到, 你也别想这东西能被拉动. 于是稍微复杂一些, 如果现在的振动模式变成了 \\(A_1 sin (&omega;_1 t + \\varphi_2) + A_2 sin (&omega;_2 t + \\varphi_2)\\), 那么如果想要消除 \\(&omega;_2\\) 频率的分量, 那么只需要引入一个新的振动 \\(A_3 sin (&omega;_3 t + \\varphi_3)\\), 使得 \\(A_2 = A_3, &omega;_2 = &omega;_3, |\\varphi_2 - \\varphi_3| = k &pi;\\), 于是合成的结果就是 \\(A_1 sin (&omega;_1 t + \\varphi_2)\\). 那么能不能更加复杂一些呢? 如果现在的振动模式变成了: \\[&int;_0^{&infin;} A(&omega;) sin(&omega; t + \\varphi(&omega;)) \\mathrm{d}&omega;\\] 如果想要消除频率区间为 \\([&omega;_1, &omega;_2]\\) 的振动分量, 那么只需要添加如下的振动模式即可: \\[&int;_{&omega;_1}^{&omega;_2} A(&omega;) sin(&omega; t + \\varphi(&omega;) + &pi;) \\mathrm{d}&omega;\\] Silence: 那不是超级简单吗? 你这个骗子! 我现在外面这些声音, 可是一丁点都不想听见, 请将频率区间 \\([0, &infin;]\\) 的都给我去掉! 你说的对, 但是降噪耳机是&#8230; 理论上是这样的, 但是上面只不过是降噪耳机原理中的冰山一角而已. 因为首先我们就要遇到的一个问题是: 我们周围的声音振动, 对我们来说, 更像是一个时间上连续变化的信息 \\(A(t)\\). 我们并不 (能直接) 知道它是由什么频率的什么分量组成的. 理论很美好, 现实很骨感, 首先, 为了能够得到量化可计算的 \\(A(t)\\), 我们需要一个麦克风. 而沉重的现实打击就已经从这里开始了: 正如人耳对过高频率和过低频率的声音并不敏感, 甚至会出现截止现象 (超声波和次声波听不见), 大多数麦克风对于不同频率的相应并不相同. 尽管我们可以通过标定输入测量一条频响曲线, 从而对不同频率给予一个修正系数. 关于修正系数的一个无关的例子 因为我也不是搞这个的, 所以没啥好的例子. 一个相近的例子为我在近代物理实验里面的滤波器的测量: 让我来解释一下这个图吧. 当时需要标定一下仪器 (滤波器), 然后就用一个标准输出 (函数发生器) 以相同幅度和不同频率作为输入, 用示波器测量输出, 得到了这张图片. 根据频响曲线, 就可以反推在某频率上测量的实际输入值, 也就是乘/除以一个增益系数. 梦里的滤波器应该是一个直上直下的平台, 除了边缘, 其他地方不是 0 就是 1. 显然, 我手上测的这个是个现实的滤波器. 那么滤波器和麦克风又有啥关系呢? 我觉得可以把麦克风看作是一种特殊的滤波器, 只不过理想的麦克风应该是一个平台无限宽, 高度恒为 1 的平台. 显然, 现实还是很骨感的. 并且这个频率相应的限制因素估计不仅仅是电子学的, 可能还有机械结构上的限制. 不过这个我就不太会了. 一个修正系数的直观例子如下: 假如输入信号为 \\(100\\), 经过麦克风拾取的强度为 \\(99\\), 那么就可以认为修正所需的系数为 \\(\\frac{100}{99} &asymp; 1.0101\\). 但是如果拾取的强度太弱, 譬如 \\(100 &rarr; 0.5 &plusmn; 0.5\\) 甚至更弱, 那么最终的结果就是, 在这里为了保证信号的正常, 必需做一个截断防止出现问题. 而在好不容易拿到声音信号 \\(A(t)\\) 之后, 一个更加麻烦的问题出现了, 我们好像还需要从中提取出频率 (空间) 的信息. 当然, 这个不会是本次的重点, 好奇的小朋友可以去看之前的文章: 舌头大姐了&#8230;, 一个剧透就是好用的傅里叶变换. 真正重点的是, 我们该如何使用傅里叶变换. 举个例子, 教科书中的傅里叶变换: \\[\\mathcal{F}(f) = &int;_{\\mathcal{D}} \\frac{1}{2 &pi;} f(x) e^{- i k x} \\mathrm{d} x\\] 其中 \\(\\mathcal{D}\\) 为值域 (一般为 \\((- &infin;, + &infin;)\\), 也可对非无穷大值域做延拓). 但是这样就会要求知道整个值域的信息 &#8211; 这可是非常离谱的事情, 想要消除声音, 竟然要等到听完所有声音信息后才能消除&#8230; 这不就是小学生的选择性失聪嘛 于是这个时候的一个妥协的方法就是只对一小部分进行傅里叶变换, 即把要消除的声音切做细细的一个个片段, 对每一部分进行傅里叶变换, 然后根据提取的频域信息去消除对应的小片段的声音. 当然, 这样的做法其实还需要一些小小的讨论, 只是在这里先跳过先. 那么理想的情况下, 只要令这个小片段的时间宽度尽可能的短, 那么降噪的实时性应该就会更好. 然而事实是, 我们还有需要妥协的问题: 假如选择的时间宽度 \\(&tau;\\) 过短, 因为采样率限制导致波形的分辨率不足而导致失真, 这样则太尴尬了. 关于分辨率的一些无关注记 说道分辨率就让我想到示波器, 测量的时候, 理应采样率应该是 \\(&times; 10^3\\) 倍于被采样的信号. 显然, 如果真的有这么强的示波器的话, 哪怕是一些原理看上去非常 low 的: 利用区间速度逼近瞬时速度的挡板法测斜坡上的小车速度, 也能够变得非常强, 比如在近物所的环形加速器上按了两个探测器来检测重离子经过 &#8211; 大概是 \\(\\mathrm{n}s\\) 量级的一个分辨率 (具体我记不清楚了, 诶, 属于是听讲座不用心, 不过应该会更小一些). 并且时间宽度 \\(&tau;\\) 也应当和计算时间 \\(&tau;_{\\mathrm{c}}\\) 相匹配, 尽管我不知道具体的实现方式应该是啥. 这里我提供一个非常简单的朴素想法: 认为在 \\(t\\) 周围 \\(&lambda; &tau;\\) 的一个领域里面, 认为振动的模式是相似的, 于是可以认为, 若 \\(&tau;_c &lt; &lambda; &tau;\\), 那么就认为它还算是可以降噪吧. 于是这里就对计算时间和时间宽度之间加了一个限制, 想要消除更高频率的声音, 就应当让 \\(&tau;\\) 更小, 于是就变相要求 \\(&tau;_{\\mathrm{c}}\\) 更小, 就要有更加快速的芯片 (估计可能会有更高的功率消耗, 使得电池电量减少, 毕竟我看我可怜的耳机从电池仓里出来都是红温的 (热的)&#8230;) 大概就这样吧, 一下车心情都好了, 也就不咋想吐槽了. The End 画饼 目前手头在忙别的一个东西, 等完成了之后, 想要用 CFFI 来调用 FFTW 写一个简单的小程序.","headline":"你好, 小朋友, 请问你们知道降噪耳机吗?","mainEntityOfPage":{"@type":"WebPage","@id":"/physics/hello-little-boy/"},"url":"/physics/hello-little-boy/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css">

  <style type="text/css">
    img {
      margin-left: auto; 
      margin-right:auto; 
      display:block;
    }
  </style><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="My Blog" /><script>
  document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        // customised options
        // • auto-render specific keys, e.g.:
        delimiters: [
            {left: '$$', right: '$$', display: true},
            {left: '$', right: '$', display: false},
            {left: '\\(', right: '\\)', display: false},
            {left: '\\[', right: '\\]', display: true}
        ],
        // • rendering keys, e.g.:
        throwOnError : false
      });
  });
</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.23/dist/katex.min.css" integrity="sha384-z91AFMXXGZasvxZz5DtKJse3pKoTPU0QcNFj/B4gDFRmq6Q2bi1StsT7SOcIzLEN" crossorigin="anonymous">

<!-- The loading of KaTeX is deferred to speed up page rendering -->
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.23/dist/katex.min.js" integrity="sha384-Af7YmksQNWRLMvro3U9F84xa0paoIu7Pu2niAIUmZoI09Q4aCsbha5dvaj1tHy6K" crossorigin="anonymous"></script>

<!-- To automatically render math in text elements, include the auto-render extension: -->
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.23/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">My Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/categories/">Categories</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">你好, 小朋友, 请问你们知道降噪耳机吗?</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2023-07-14T00:00:00+00:00" itemprop="datePublished">Jul 14, 2023
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h1>About</h1>
<p>先别问小朋友们知不知道, 总之先给我来张 Silence 卡,
  对, 就是小樱那张.</p>
<p>和吃席坐小孩那桌相对的估计就是坐车和小孩一车吧.
  而我的更离谱一些, 我是和一车小孩&#8230;</p>
<p>算了, 再多熬一会儿, 等我耳机充完电就好&#8230;
  所以这篇文章只会是一个非常短小的科普文章.</p>
<h1>逆转降噪耳机</h1>
<p>大多数人可能会因为 &#8220;降噪耳机&#8221; 万分吸引人的名字而尝试入手,
  然后在经历现实拷打之后大喊 &#8220;退钱!&#8221;. 但是我要说: &#8220;異議あり!&#8221;,
  这可真的是误会它了.</p>
<p>当然, 为了防止刚来的吃瓜群众不太清楚事情的前因后果,
  我们还是来简单地介绍一下案情吧:</p>
<p>被告降噪耳机以 &#8220;主动式&#8221; 降噪为主要卖点,
  因为使用效果不佳而被我们的原告: Silence 库洛牌告上了我们的离谱法庭,
  罪名为不能让自己在周围吵闹的环境里面安静地享受.</p>
<p><b>Silence</b>: 这家伙虽然让我听不见了列车的嗡嗡声, 但是根本没有减少那帮小祖宗,
  那帮扬声器们的声波武器!</p>
<p>很遗憾, 但是这就是事实, 主动式降噪耳机是有极限的. <del>所以我不做&#8230;</del>
  虽然能, 但是并不是万能, 也不是一定能. 这是因为&#8230;</p>
<h2>你先别急, 听我狡辩</h2>
<p>在这里我们先介绍两个简单的前置知识:</p>
<ul>
  <li>听到声音是空气的振动作用在鼓膜上,
    使得神经细胞受到刺激最终在大脑得到信号的一个过程.</li>
  <li>为了描述最简单的振动我们可以用 \(&sum;_{&omega;} A sin (&omega; t + \varphi_s) + B cos (&omega; t + \varphi_c)\),
    也就是三角函数的形式来描述.</li>
</ul>
<p>用一个最简单的振动 \(A sin &omega; t\) 来作为例子来解释上面的两个知识点:</p>
<ul>
  <li>在鼓膜 (耳朵) 边上的空气被压缩又膨胀, 就像是一根弹簧一样推动着鼓膜振动.</li>
  <li>那么如果想要不听到声音, 只要在声音传播的这条路上埋伏起来偷袭就好了:
    <ul>
      <li>比如我们可以跑到真空中, 这个时候, 作为声音传播媒介的空气就消失了,
        自然就一点也听不见了. 虽然这个时候你可能不太舒服, 但你就说这是不是消失了呢.</li>
      <li>当然, 其他的一些操作可能过于地狱了一些, 不适合作为给小朋友的介绍,
        还是算了. (比如由于鼓膜老化, 破裂等造成空气的振动无法转换为鼓膜的振动;
        又或者是鼓膜到大脑的神经链路因为各种原因而损坏等等)</li>
    </ul>
    <p>显然, 我们的目标应当是尽可能简单而无副作用地实现消除噪音的愿望,
      毕竟这可不是啥猿猴之手呢. 所以最合理的做法就是切断在空气中的传播路径.</p>
  </li>
</ul>
<p>想要切断空气中的传播路径, 最简单的方法就是用手或者其他的东西将耳朵捂起来.
  这就是 &#8220;被动式&#8221; 的降噪耳机的思路: 如何构造并选择更好的结构来使得外界的声音更难传入.</p>
<p>而相比被动式降噪耳机, 主动式降噪耳机的思路就是 \(A sin (&omega; t) + A sin (&omega; t + k &pi;) = 0\).
  用一个不太合理的图像来表示就是: 两个小孩在拉东西, 假如这两个小孩用的力气相等,
  用的方向又时时刻刻相反, 嘿, 今天就是天皇老子驾到, 你也别想这东西能被拉动.</p>
<p>于是稍微复杂一些, 如果现在的振动模式变成了 \(A_1 sin (&omega;_1 t + \varphi_2) + A_2 sin (&omega;_2 t + \varphi_2)\),
  那么如果想要消除 \(&omega;_2\) 频率的分量, 那么只需要引入一个新的振动 \(A_3 sin (&omega;_3 t + \varphi_3)\),
  使得 \(A_2 = A_3, &omega;_2 = &omega;_3, |\varphi_2 - \varphi_3| = k &pi;\), 于是合成的结果就是 \(A_1 sin (&omega;_1 t + \varphi_2)\).</p>
<p>那么能不能更加复杂一些呢? 如果现在的振动模式变成了:</p>
<p>\[&int;_0^{&infin;} A(&omega;) sin(&omega; t + \varphi(&omega;)) \mathrm{d}&omega;\]</p>
<p>如果想要消除频率区间为 \([&omega;_1, &omega;_2]\) 的振动分量, 那么只需要添加如下的振动模式即可:</p>
<p>\[&int;_{&omega;_1}^{&omega;_2} A(&omega;) sin(&omega; t + \varphi(&omega;) + &pi;) \mathrm{d}&omega;\]</p>
<p><b>Silence</b>: 那不是超级简单吗? 你这个骗子! 我现在外面这些声音,
  可是一丁点都不想听见, 请将频率区间 \([0, &infin;]\) 的都给我去掉!</p>
<h2>你说的对, 但是降噪耳机是&#8230;</h2>
<p>理论上是这样的, 但是上面只不过是降噪耳机原理中的冰山一角而已.
  因为首先我们就要遇到的一个问题是: 我们周围的声音振动,
  对我们来说, 更像是一个时间上连续变化的信息 \(A(t)\).
  我们并不 (能直接) 知道它是由什么频率的什么分量组成的.</p>
<p>理论很美好, 现实很骨感, 首先, 为了能够得到量化可计算的 \(A(t)\),
  我们需要一个麦克风. 而沉重的现实打击就已经从这里开始了:</p>
<ul>
  <li>正如人耳对过高频率和过低频率的声音并不敏感,
    甚至会出现截止现象 (超声波和次声波听不见),
    大多数麦克风对于不同频率的相应并不相同.
    <p>尽管我们可以通过标定输入测量一条频响曲线, 从而对不同频率给予一个修正系数.</p>
  <details><summary> 关于修正系数的一个无关的例子 </summary>
    <p>因为我也不是搞这个的, 所以没啥好的例子.
      一个相近的例子为我在近代物理实验里面的滤波器的测量:</p>
    <p><img src="/_img/pieces/frequency-plot-function-arbitrary-waveform-generator.png" alt="/_img/pieces/frequency-plot-function-arbitrary-waveform-generator.png" /></p>
    <p>让我来解释一下这个图吧.</p>
    <ul>
      <li>当时需要标定一下仪器 (滤波器),
        然后就用一个标准输出 (函数发生器) 以相同幅度和不同频率作为输入,
        用示波器测量输出, 得到了这张图片.</li>
      <li>根据频响曲线, 就可以反推在某频率上测量的实际输入值,
        也就是乘/除以一个增益系数.</li>
      <li>梦里的滤波器应该是一个直上直下的平台, 除了边缘, 其他地方不是 0 就是 1.
        显然, 我手上测的这个是个现实的滤波器.
        <p>那么滤波器和麦克风又有啥关系呢?
          我觉得可以把麦克风看作是一种特殊的滤波器,
          只不过理想的麦克风应该是一个平台无限宽, 高度恒为 1 的平台.
          显然, 现实还是很骨感的.</p>
      </li>
    </ul>
    <p>并且这个频率相应的限制因素估计不仅仅是电子学的, 可能还有机械结构上的限制.
      不过这个我就不太会了.</p>
  </details>
    <p>一个修正系数的直观例子如下: 假如输入信号为 \(100\), 经过麦克风拾取的强度为 \(99\),
      那么就可以认为修正所需的系数为 \(\frac{100}{99} &asymp; 1.0101\). 但是如果拾取的强度太弱,
      譬如 \(100 &rarr; 0.5 &plusmn; 0.5\) 甚至更弱, 那么最终的结果就是, 在这里为了保证信号的正常,
      必需做一个截断防止出现问题.</p>
  </li>
  <li>而在好不容易拿到声音信号 \(A(t)\) 之后, 一个更加麻烦的问题出现了,
    我们好像还需要从中提取出频率 (空间) 的信息.
    <p>当然, 这个不会是本次的重点, 好奇的小朋友可以去看之前的文章:
      <a href="/physics/tongue-stuck/">舌头大姐了&#8230;</a>, 一个剧透就是好用的傅里叶变换.</p>
    <p>真正重点的是, 我们该如何使用傅里叶变换. 举个例子,
      教科书中的傅里叶变换:</p>
    <p>\[\mathcal{F}(f) = &int;_{\mathcal{D}} \frac{1}{2 &pi;} f(x) e^{- i k x} \mathrm{d} x\]</p>
    <p>其中 \(\mathcal{D}\) 为值域 (一般为 \((- &infin;, + &infin;)\), 也可对非无穷大值域做延拓).
      但是这样就会要求知道整个值域的信息 &#8211; 这可是非常离谱的事情,
      想要消除声音, 竟然要等到听完所有声音信息后才能消除&#8230;
      <del>这不就是小学生的选择性失聪嘛</del></p>
    <p>于是这个时候的一个妥协的方法就是只对一小部分进行傅里叶变换,
      即把要消除的声音切做细细的一个个片段, 对每一部分进行傅里叶变换,
      然后根据提取的频域信息去消除对应的小片段的声音.</p>
    <p>当然, 这样的做法其实还需要一些小小的讨论, 只是在这里先跳过先.</p>
  </li>
  <li>那么理想的情况下, 只要令这个小片段的时间宽度尽可能的短,
    那么降噪的实时性应该就会更好.
    <p>然而事实是, 我们还有需要妥协的问题: 假如选择的时间宽度 \(&tau;\) 过短,
      因为采样率限制导致波形的分辨率不足而导致失真, 这样则太尴尬了.</p>
  <details><summary> 关于分辨率的一些无关注记 </summary>
    <p>说道分辨率就让我想到示波器, 测量的时候,
      理应采样率应该是 \(&times; 10^3\) 倍于被采样的信号.</p>
    <p>显然, 如果真的有这么强的示波器的话, 哪怕是一些原理看上去非常 low 的:
      利用区间速度逼近瞬时速度的挡板法测斜坡上的小车速度, 也能够变得非常强,
      比如在近物所的环形加速器上按了两个探测器来检测重离子经过 &#8211;
      大概是 \(\mathrm{n}s\) 量级的一个分辨率 (具体我记不清楚了, 诶, 属于是听讲座不用心,
      不过应该会更小一些).</p>
  </details>
  </li>
  <li>并且时间宽度 \(&tau;\) 也应当和计算时间 \(&tau;_{\mathrm{c}}\) 相匹配, 尽管我不知道具体的实现方式应该是啥.
    这里我提供一个非常简单的朴素想法: 认为在 \(t\) 周围 \(&lambda; &tau;\) 的一个领域里面,
    认为振动的模式是相似的, 于是可以认为, 若 \(&tau;_c &lt; &lambda; &tau;\), 那么就认为它还算是可以降噪吧.
    <p>于是这里就对计算时间和时间宽度之间加了一个限制, 想要消除更高频率的声音,
      就应当让 \(&tau;\) 更小, 于是就变相要求 \(&tau;_{\mathrm{c}}\) 更小, 就要有更加快速的芯片
      (估计可能会有更高的功率消耗, 使得电池电量减少,
      毕竟我看我可怜的耳机从电池仓里出来都是红温的 (热的)&#8230;)</p>
  </li>
</ul>
<p>大概就这样吧, 一下车心情都好了, 也就不咋想吐槽了.</p>
<h1>The End</h1>
<h2>画饼</h2>
<ul>
  <li>目前手头在忙别的一个东西, 等完成了之后,
    想要用 <a href="https://cffi.common-lisp.dev">CFFI</a> 来调用 <a href="http://www.fftw.org">FFTW</a> 写一个简单的小程序.</li>
</ul>

  </div><a class="u-url" href="/physics/hello-little-boy/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">My Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">My Blog</li><li><a class="u-email" href="mailto:thebigbigwordl@qq.com">thebigbigwordl@qq.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/li-yiyang"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">li-yiyang</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>某不知名的很硬的双非学校的物理系学生的无聊博客</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
