<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Why’s (poignant) Guide to Ruby | My Blog</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Why’s (poignant) Guide to Ruby" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Why’s (poignant) Guide to Ruby 假如你不知道_why, 那很正常, 因为这本来就应该是他的愿望. (也许是他的愿望吧, 因为有一天他删除了自己的所有github 以及所有的社交账号, 然后就不见了. )" />
<meta property="og:description" content="Why’s (poignant) Guide to Ruby 假如你不知道_why, 那很正常, 因为这本来就应该是他的愿望. (也许是他的愿望吧, 因为有一天他删除了自己的所有github 以及所有的社交账号, 然后就不见了. )" />
<link rel="canonical" href="/ruby/why's_(poignant)_guide_to_ruby/why's-poignant-guide/" />
<meta property="og:url" content="/ruby/why's_(poignant)_guide_to_ruby/why's-poignant-guide/" />
<meta property="og:site_name" content="My Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-11-18T10:06:32+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Why’s (poignant) Guide to Ruby" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2021-11-18T10:06:32+00:00","datePublished":"2021-11-18T10:06:32+00:00","description":"Why’s (poignant) Guide to Ruby 假如你不知道_why, 那很正常, 因为这本来就应该是他的愿望. (也许是他的愿望吧, 因为有一天他删除了自己的所有github 以及所有的社交账号, 然后就不见了. )","headline":"Why’s (poignant) Guide to Ruby","mainEntityOfPage":{"@type":"WebPage","@id":"/ruby/why's_(poignant)_guide_to_ruby/why's-poignant-guide/"},"url":"/ruby/why's_(poignant)_guide_to_ruby/why's-poignant-guide/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css">

  <style type="text/css">
    img {
      margin-left: auto; 
      margin-right:auto; 
      display:block;
    }
  </style><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="My Blog" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">My Blog</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/categories/">Categories</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Why&#39;s (poignant) Guide to Ruby</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2021-11-18T10:06:32+00:00" itemprop="datePublished">Nov 18, 2021
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h1 id="whys-poignant-guide-to-ruby">Why’s (poignant) Guide to Ruby</h1>
<p>假如你不知道<code class="language-plaintext highlighter-rouge">_why</code>, 那很正常, 因为这本来就应该是他的愿望. 
(也许是他的愿望吧, 因为有一天他删除了自己的所有<code class="language-plaintext highlighter-rouge">github</code>
以及所有的社交账号, 然后就不见了. )</p>

<p>实际上, 我之所以会选择学习<code class="language-plaintext highlighter-rouge">ruby</code>的很大原因就是因为他的教程. 
很有趣也很厉害. 和市面上的随处可见的按部就班的编程教材不同, 
他的书更像是一种故事书和漫画书. 与其说是在教我写代码, 
不如说更像是在看一个有着宏大世界观的故事, 进入到了一个代码
(哦不, 应该是计算机的)世界.</p>

<p>唯一的缺点是, 这本书没有翻译, 并且在<code class="language-plaintext highlighter-rouge">_why</code>消失了之后, 
其他人最多的贡献就只是把它更新到了新版本<code class="language-plaintext highlighter-rouge">ruby</code>的部分语法, 
但是这个新版本在现在看来也很旧了.</p>

<p>(虽然很旧, 但是没关系, 因为<code class="language-plaintext highlighter-rouge">ruby</code>是向下兼容的, 笑. )</p>

<p>假如我要翻译这部大作的话, 我觉得这是不可能的. 
因为我做不到, 也很可能没有时间.</p>

<p>网上有一个人好像在尝试翻译这本书, 
给出<a href="http://codecly259.github.io/poignant-guide-cn/">链接</a>, 
然而, 读着的感觉很怪, 并且还没翻完. 
英文原版是在<a href="https://poignant.guide/book">这</a>.</p>

<p>我现在有一个小目标, 因为这本书实际上是我在很早之前读的, 
(但是没有读完), 所以我现在发现自己的<code class="language-plaintext highlighter-rouge">ruby</code>代码写得不够酷, 
所以回过来读一读<code class="language-plaintext highlighter-rouge">_why</code>的作品, 顺带记录一下这个学习心得.</p>

<p>不是翻译, 更像是做注记, 或者是乱改?</p>

<p>开了一个天坑的感觉…</p>

<h2 id="expansion-pak-no1">Expansion Pak No.1</h2>
<p>(贴心提示: 本文是有图片的, 虽然我没有翻译, 
而是直接引用了原来的图片地址, 假如你看不到的话, 
请等一等, 没准就出来了. )</p>

<p><img src="https://poignant.guide/images/tigers.vest-1.gif" alt="tiger has vest, tiger likes girl robot, earth crashing into the sun" title="阿珍爱上了阿强, 穿背心的老虎爱上了机器女孩. 哦, 不! 地球它在撞向太阳! 而我们却依旧选择歌唱... " /></p>

<p>首先要安装<code class="language-plaintext highlighter-rouge">ruby</code>, 这里我不使用<code class="language-plaintext highlighter-rouge">_why</code>的说法, 
因为在<code class="language-plaintext highlighter-rouge">macOS</code>自带的<code class="language-plaintext highlighter-rouge">ruby</code>里面有很多坑爹的地方, 
所以一般建议是安装<code class="language-plaintext highlighter-rouge">homebrew</code>
(这样之后就相当于把<code class="language-plaintext highlighter-rouge">macOS</code>变成了一个假)</p>

<p>或者安装<code class="language-plaintext highlighter-rouge">rvm</code>再安装<code class="language-plaintext highlighter-rouge">ruby</code>.</p>

<p>(我去, 这也太麻烦了. 结论, 直接用? 
不是, 实际上还是值得这般折腾的. 因为以后会用到. )</p>

<p>对于<code class="language-plaintext highlighter-rouge">windows</code>, <code class="language-plaintext highlighter-rouge">ruby installer</code>超级香的. 
虽然我记得也有许多的坑的样子, 但是很无脑. 
<a href="https://rubyinstaller.org">链接</a>
(强烈建议安装带<code class="language-plaintext highlighter-rouge">devkit</code>的, 因为某些用到<code class="language-plaintext highlighter-rouge">C</code>的<code class="language-plaintext highlighter-rouge">gem</code>需要它. 
当然, 简单使用的话是没关系的. )</p>

<p>打开命令行, 在<code class="language-plaintext highlighter-rouge">macOS</code>上, 这个叫<code class="language-plaintext highlighter-rouge">Terminal</code>. 
输入<code class="language-plaintext highlighter-rouge">ruby -v</code>就可以得到<code class="language-plaintext highlighter-rouge">ruby</code>版本, 
因为<code class="language-plaintext highlighter-rouge">-v</code>是<code class="language-plaintext highlighter-rouge">--version</code>的一个缩记.</p>

<p>我的<code class="language-plaintext highlighter-rouge">Ubantu</code>的虚拟机上的输出是:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; ruby -v
ruby 3.0.0p0 (2020-12-25 revision 95aff21468) [aarch64-linux]
</code></pre></div></div>

<blockquote>
  <h1 id="about-ruby-versions">About Ruby Versions</h1>
  <p>现在我手上的<code class="language-plaintext highlighter-rouge">ruby</code>版本是<code class="language-plaintext highlighter-rouge">3.0.0</code>, 
据说已经放出了<code class="language-plaintext highlighter-rouge">3.1.1_preview1</code>的发布
<a href="https://www.ruby-lang.org/en/news/2021/11/09/ruby-3-1-0-preview1-released/">news</a>. 
真好.</p>

  <p>仔细观察就可以发现在<code class="language-plaintext highlighter-rouge">ruby</code>的版本号里面有三个数, 
分别是<strong>主版本号 (the major version)</strong>, 
<strong>次版本号 (the minor version)</strong>, 还有
<strong>小版本号 (the teeny version)</strong>. 
(我承认, 我瞎翻译的. )
每一次<code class="language-plaintext highlighter-rouge">ruby</code>被重构, 主版本号就会递增一位. 
(each complete rewrite of Ruby)
每一次有比较大的改动(sweeping changes)的话, 
次版本号就会递增. 小版本号大概会每个月睡着一些零碎的修改, 
以及一些bug的修补然后放出.</p>

  <p>并且<code class="language-plaintext highlighter-rouge">ruby</code>迭代的速度很快, 基本上放到
<strong>Ruby-Core mailing list</strong>
上的很棒的想法往往在几天之后就会被引入<code class="language-plaintext highlighter-rouge">ruby</code>中.</p>

  <p>(据说Matz, <code class="language-plaintext highlighter-rouge">ruby</code>之父, 是一个很高产的人)</p>

  <p>(据说<code class="language-plaintext highlighter-rouge">ruby</code> 的 <code class="language-plaintext highlighter-rouge">3.x</code> 版本比<code class="language-plaintext highlighter-rouge">2.x</code>快了将近 <strong>3</strong> 倍. )</p>
</blockquote>

<p><img src="https://poignant.guide/images/tigers.vest-2.gif" alt="tiger saves the earth with ice gun. girl robot zoomed around tuxed shop..." title="老虎用激冻枪救下了地球. 在那小小的西服店里, 美丽的机器女郎在徘徊..." /></p>

<p>(花心老虎?! 还是纯情老虎? 这拯救地球也太扯了. 魔幻现实主义. )</p>

<p><code class="language-plaintext highlighter-rouge">ruby</code>带了一个超级超级强力的工具 – <strong>Irb</strong>, 
也就是<strong>ineractive ruby</strong>, 直接翻译过来就是交互<code class="language-plaintext highlighter-rouge">ruby</code>终端.</p>

<p>(我认为这个可能来源于<code class="language-plaintext highlighter-rouge">lisp</code>的<code class="language-plaintext highlighter-rouge">repl</code>
<strong>READ-EVAL-PRINT-LOOP</strong>的想法… 只是猜想, 不一定对. )</p>

<p>在终端里输入<code class="language-plaintext highlighter-rouge">irb</code>就可以进入:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>3.0.0 :001 &gt; 
</code></pre></div></div>

<p>在<code class="language-plaintext highlighter-rouge">irb</code>中, 你可以输入<code class="language-plaintext highlighter-rouge">ruby</code>的代码, 然后轻轻地一敲回车, 
你的代码就会跑起来了.</p>

<p>比如说, 在窗口中输入一点点算数:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>3.0.0 :001 &gt; 3000 + 500
 =&gt; 3500 
</code></pre></div></div>

<p>尽管在这行代码里面, 我们完全没有把运算的结果和变量关联在一起, 
或者是把变量打印到屏幕上, 但是这样是完全OK的, 因为这可是<code class="language-plaintext highlighter-rouge">irb</code>啊, 
它可以帮我们直接把返回值输出返回给我们.</p>

<p>某种方面来说, <code class="language-plaintext highlighter-rouge">irb</code>可以算是一个很好的计算器:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>3.0.0 :002 &gt; ( ( 220.00 + 34.15 ) * 1.08 ) / 12
 =&gt; 22.873500000000003 
3.0.0 :003 &gt; "1011010".to_i( 2 )
 =&gt; 90 
3.0.0 :004 &gt; Time.now - Time.local( 2003, "Jul", 31, 8, 10, 0 )
 =&gt; 577642071.301868
</code></pre></div></div>

<p>(就像是<code class="language-plaintext highlighter-rouge">_why</code>先生在第一章就倡导的那样, 
编程语言不应该只是”电脑的语言”, 而应该是写程序的人的语言, 
我们可以读出编程语言, 就像是在读一门很简单的外语一样. )
所以<code class="language-plaintext highlighter-rouge">002</code>的代码就不过是一点点的数学: 
<code class="language-plaintext highlighter-rouge">220.00</code>加上<code class="language-plaintext highlighter-rouge">34.15</code>的和乘以<code class="language-plaintext highlighter-rouge">1.08</code>再除以<code class="language-plaintext highlighter-rouge">12</code>; 煎蛋. 
<code class="language-plaintext highlighter-rouge">003</code>的代码的意思是: 
把这一串<code class="language-plaintext highlighter-rouge">01</code>内容的二进制字符串按照<code class="language-plaintext highlighter-rouge">2</code>进制变成整数(<strong>i</strong>nt). 
<code class="language-plaintext highlighter-rouge">004</code>的代码做的事情是: 
把现在的时间和当地时间<code class="language-plaintext highlighter-rouge">2003/6/31 8:10 AM</code>相减, 
就会得到相差的时间(单位是秒).</p>

<h3 id="读一读前面的提示符prompt">读一读前面的提示符(prompt)</h3>
<p>(不知道是版本的问题还是我的问题, 
我手上的<code class="language-plaintext highlighter-rouge">ruby</code>的<code class="language-plaintext highlighter-rouge">irb</code>的提示符和<code class="language-plaintext highlighter-rouge">_why</code>的是很不一样的. 
所以我就看看我自己的说了. )</p>

<p>仔细观察命令行输入前面的标志:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>3.0.0 :005 &gt; 
</code></pre></div></div>

<p>可以发现, 有三个部分: <code class="language-plaintext highlighter-rouge">3.0.0</code>是<strong>版本号</strong>, <code class="language-plaintext highlighter-rouge">:005</code>是行号, 
也就是记录了我们在<code class="language-plaintext highlighter-rouge">irb</code>里面输入了多少行, 
第三个部分就是<code class="language-plaintext highlighter-rouge"> &gt;</code>, 不要觉得看起来很寒酸, 实际上有很多的玄机. 
比如说在里面输入字符串:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>3.0.0 :005"&gt; "a string I haven't finish...
</code></pre></div></div>
<p>就会发现前面的出现了一个<code class="language-plaintext highlighter-rouge">"</code>, 表示现在有一个<code class="language-plaintext highlighter-rouge">"</code>字符串没有闭合, 
很贴心啦. 同样的还有正则表达式的输入, 等等.</p>

<p>并且<code class="language-plaintext highlighter-rouge">irb</code>还会贴心地为你进行缩进和简单检查一下代码是不是正常的, 
比如我在输入<code class="language-plaintext highlighter-rouge">hash</code>的时候, 如果忘了加逗号:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>3.0.0 :012 &gt; hash = {
3.0.0 :013 &gt;   :a_key =&gt; :a_value
3.0.0 :014?&gt;   :an_other_wait_something_is_wrong
</code></pre></div></div>
<p>就会出现一个<code class="language-plaintext highlighter-rouge">?</code>符号来表示<code class="language-plaintext highlighter-rouge">irb</code>可能不是很理解.</p>

<p>(并且不知道是不是我自己设置了别的什么, 现在的<code class="language-plaintext highlighter-rouge">irb</code>自带语法高亮, 
看起来就很酷. 但是<code class="language-plaintext highlighter-rouge">python</code>没有, 所以应该不是我的错吧?)</p>

<h3 id="水一点的提示符">水一点的提示符</h3>
<p>如果你觉得前面的提示符有点烦, (极简主义者), 没问题, 
我挺你, 让我来告诉你一点点<code class="language-plaintext highlighter-rouge">hacking</code>小提示.</p>

<p>(退出<code class="language-plaintext highlighter-rouge">irb</code>的方式很简单, 只要输入<code class="language-plaintext highlighter-rouge">exit</code>函数就好. )</p>

<p>因为<code class="language-plaintext highlighter-rouge">irb</code>里面包含了一些别的提示符的形式, 
所以不妨试一试在命令行里面输入<code class="language-plaintext highlighter-rouge">irb --prompt simple</code>, 
于是, 你就会得到一个简单的提示符.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt; %w(my best friend's arm)
=&gt; ["my", "best", "friend's", "arm"]
</code></pre></div></div>
<p>(哇哦, 北欧简约风, 笑. 这不就是某宝的推销词嘛…)</p>

<p><code class="language-plaintext highlighter-rouge">ruby</code>还有很多别的提示符的选项, 除了<code class="language-plaintext highlighter-rouge">simple</code>, 
还有<code class="language-plaintext highlighter-rouge">xmp</code>(是一个完全没有提示符以及一个带缩进的输出). 
并且还有更绝的<code class="language-plaintext highlighter-rouge">null</code>, 完全没有, <del>真空出行</del>. 
想要尝试这样的花样<code class="language-plaintext highlighter-rouge">irb</code>, 你只需要把<code class="language-plaintext highlighter-rouge">prompt</code>修饰符的输入改掉就好
(<code class="language-plaintext highlighter-rouge">irb --prompt null</code>).</p>

<p>当然, 假如你觉得还不够强, 你可以自己来定制.</p>

<p>(你只需要黑进<code class="language-plaintext highlighter-rouge">irb</code>, 敲敲手指, 吹吹口哨…)</p>

<p><code class="language-plaintext highlighter-rouge">irb</code>运行中有一个<code class="language-plaintext highlighter-rouge">conf</code>对象, 它控制了<code class="language-plaintext highlighter-rouge">irb</code>的配置文件
(Irb’s configuration settings), 
里面有部分的选项可以用来控制提示符. 让我们看看:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt; conf.methods.grep /prompt/
=&gt; [:prompt_i=, :prompt_s=, :prompt_c=, :prompt_n=, :prompt_mode, :prompt_mode=, :prompt_s, :prompt_c, :prompt_n, :prompt_i, :prompting?]
</code></pre></div></div>

<p>然后你就可以来上手了:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt; conf.prompt_i = "%3n :&gt; "       # 改变普通模式的提示符
  2 :&gt;                             # 好耶
  3 :&gt; conf.prompt_s = "%3n .%l "  # 改变字符串模式的提示符
  4 ." "a string mode... wow       # wow
  5 :&gt; conf.prompt_c = "%3n .^ "   # 改变代码块模式的提示符
  6 .^ 5.times do
  7 .^   print "wow"
  8 .^ end
  9 :&gt; conf.return_format = "    =&gt; %s\n" 
                                   # 改变输出符
 10 :&gt; 4+4
    =&gt; 8                               
</code></pre></div></div>

<p>上面的<code class="language-plaintext highlighter-rouge">%3n</code>和<code class="language-plaintext highlighter-rouge">%l</code>的作用就是一种替代的作用, 
相当于形成一个模版, 让<code class="language-plaintext highlighter-rouge">ruby</code>把信息填充到这个模版里面, 
很简单的: <code class="language-plaintext highlighter-rouge">%3n</code>就是把行号按长度<code class="language-plaintext highlighter-rouge">3</code>填充到字符串中, 
<code class="language-plaintext highlighter-rouge">%l</code>就是用来把输入字符串开头的符号打印到提示符中.</p>

<p>假如你还想要更高级的花活, 建议去读一下
<a href="https://ruby-doc.org/stdlib-3.0.2/libdoc/irb/rdoc/IRB.html">文档</a></p>

<p>(这里<code class="language-plaintext highlighter-rouge">_why</code>给出的<a href="http://www.rubycentral.com/book/irb.html">链接</a>挂了. )</p>

<h3 id="tab补全">Tab补全</h3>
<p><code class="language-plaintext highlighter-rouge">irb</code>里面有一个超级好用的功能就是<code class="language-plaintext highlighter-rouge">tab</code>补全.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>irb --readline -r irb/completion
</code></pre></div></div>
<p>(这个功能好像现在已经被默认开启了, 所以上面的代码也许是没必要的. )</p>

<p>简单的来说, 假如你帅气的一敲<code class="language-plaintext highlighter-rouge">tab</code>键, 
<code class="language-plaintext highlighter-rouge">irb</code>就会帮你补全你的想要输入的代码(<del>基本上靠猜</del>)
(实际上就是补全): 试一试输入<code class="language-plaintext highlighter-rouge">[].col</code>然后再按下<code class="language-plaintext highlighter-rouge">tab</code>, 
然后<code class="language-plaintext highlighter-rouge">irb</code>就会贴心地帮你补充成<code class="language-plaintext highlighter-rouge">[].collect</code>, 
并且将你的光标移动到输入的最后, 让你可以继续编辑. 
(比如<code class="language-plaintext highlighter-rouge">[].collect_concat</code>等等之类的. )</p>

<p>但是假如有很多的匹配的时候, 
你可能就会觉得<code class="language-plaintext highlighter-rouge">irb</code>就不知道你想说什么了, 
确实, 假如你只是输入了一个:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt; 42.
</code></pre></div></div>
<p>这时候想要按<code class="language-plaintext highlighter-rouge">tab</code>弹出一些补全的话好像有点没道理吧. 
(这就好像是你对这一张白纸, 按下<code class="language-plaintext highlighter-rouge">tab</code>键, 
然后祈祷出来一张写满大一统理论的论文一样. )</p>

<p>但是等等, <code class="language-plaintext highlighter-rouge">irb</code>还是可以的. 只要你再按一次<code class="language-plaintext highlighter-rouge">tab</code>键, 
也就是第二次<code class="language-plaintext highlighter-rouge">tab</code>时. 
<code class="language-plaintext highlighter-rouge">ruby</code>会给你一个(完整的)可以用来补全的列表来让帮助你填写.</p>

<p>(这里之所以把”完整的”加了括号, 因为我发现还是有一点点不一样的, 
在<code class="language-plaintext highlighter-rouge">_why</code>给出的<code class="language-plaintext highlighter-rouge">irb --readline -r irb/completion</code>模式中, 
双次点击<code class="language-plaintext highlighter-rouge">tab</code>会得到一整个列表, 甚至还会因为列表太大了, 
会询问一下你要不要展开(向下展开). 而在正常模式下, 
这样的点击两次会向上展开列表, 展开的大小和终端的窗口大小有关, 
建议实际操作一下就知道了. )</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>...
42.untaint
42.untrust
42.untrusted?
42.upto
42.yield_self
42.zero?
3.0.0 :001 &gt; 42.
</code></pre></div></div>

<p>(上面的是我在<code class="language-plaintext highlighter-rouge">irb</code>运行的结果)</p>

<p>所以现在试一试在<code class="language-plaintext highlighter-rouge">irb</code>中输入<code class="language-plaintext highlighter-rouge">Kernel::</code>然后再双击<code class="language-plaintext highlighter-rouge">tab</code>, 
锵! 你就得到了所有的核心命令. (core methods) 
记住这个小技巧, 然后经常使用的话可以带来很多的便利.</p>

<p><img src="https://poignant.guide/images/tigers.vest-3.gif" alt="except the robot flew away and the ice gun went on and on" title="但是机器女郎飞走了, 留下激冻枪一直地喷射..." /></p>

<p>好的, 你现在就可以尽情享受和这美妙技术的二人世界了, 
我不会再打扰你了. 哦, 不, 还有一件事忘了说了! (超大声!!!)
(超越超大声的超超大声!!!!) 那就是:</p>

<h1 style="font-size:84pt; color:#FDD; line-height: 120%;text-align:center;">((<span style="color:#A53;">ri</span>))</h1>

<p>(哦不, 喊的太大声了)</p>

<h3 id="rubys-own-411-or-555-1212-or-yes-operator-get-belgrade-on-the-lineill-be-right-herejust-plain-hammering-the-pound-key-until-someone-picks-up">(Ruby’s Own 411 or 555-1212 or Yes, Operator, Get Belgrade on the Line—I’ll Be Right Here—Just Plain Hammering The Pound Key Until Someone Picks Up…)</h3>
<p><em>“你好, 是Ruby 114 接线员吗? 请将我连上线 – 嗯, 好的, 我接上线了 – 请保持接通并等待对方接听. “</em></p>

<p>于是Ri接起了电话: “你好, 这里是Ri. 请问是什么类, 注意加上冒号.”</p>

<p>于是你赶忙说: “你好接线员, 我在找一个实例函数. 
是<code class="language-plaintext highlighter-rouge">Enumerable#zip</code>”</p>

<p>(你在命令行里面输入了一条命令: )</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ri Enumerable#zip
</code></pre></div></div>

<p>(假如不能运行, 比如显示<code class="language-plaintext highlighter-rouge">no matches found: Enumerable#zip</code>
的话, 没关系, 看下面的注记. )</p>

<p>不一会儿, 超迅速的, <code class="language-plaintext highlighter-rouge">ri</code>会给出一个结果: 
(<em>so swiftly that even the cat perched atop cranes his neck around, gapes and hands it the royal cup Most Blatantly Great Thing Since Michael Dorn</em>
老实说, 这里的翻译我有点吃不消. )</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--------------------------------------------------------- Enumerable#zip
     enum.zip(arg, ...)                   =&gt; array
     enum.zip(arg, ...) {|arr| block }    =&gt; nil
------------------------------------------------------------------------
     Converts any arguments to arrays, then merges elements of _enum_
     with corresponding elements from each argument. This generates a
     sequence of +enum#size+ _n_-element arrays, where _n_ is one more
     that the count of arguments. If the size of any argument is less
     than +enum#size+, +nil+ values are supplied. If a block given, it
     is invoked for each output array, otherwise an array of arrays is
     returned.

        a = [ 4, 5, 6 ]
        b = [ 7, 8, 9 ]

        (1..3).zip(a, b)      #=&gt; [[1, 4, 7], [2, 5, 8], [3, 6, 9]]
        "cat\ndog".zip([1])   #=&gt; [["cat\n", 1], ["dog", nil]]
        (1..3).zip            #=&gt; [[1], [2], [3]]
</code></pre></div></div>

<blockquote>
  <p>Note that shell quoting or escaping 
may be required for method names 
containing punctuation:)</p>

  <p>摘自<code class="language-plaintext highlighter-rouge">man ri</code></p>
</blockquote>

<p>(这里要加一句话, 就是建议在查询的时候用引号来扩住查的东西, 
就像这样: <code class="language-plaintext highlighter-rouge">ri "Enumerable#zip</code>. 
原因是这样可以防止特殊符号作祟. )</p>

<p>实际上<code class="language-plaintext highlighter-rouge">ri</code>就是一个无删减的<code class="language-plaintext highlighter-rouge">ruby</code>查询服务 – 哪里不会点哪里 –
不要告诉我你从来没听过这样的好东西. 
(又是一个翻译不来的东西: 
no-money-down lifetime-supply-of-proper-explanations
虽然原文应该是表示自己的比喻超级有趣的样子. )
(参考翻译: 太快了以至于甚至是坐在顶端的猫都伸长了他的脖子, 
目瞪口呆地看着并把皇家奖杯递给它
– 这是自Michael Dorn 以来最清楚不过的伟大的事)</p>

<p>假如你想要得到任何类(class)以及它全部的方法(methods), 
只要轻轻地输入: <code class="language-plaintext highlighter-rouge">ri Class</code>, (<code class="language-plaintext highlighter-rouge">Class</code>是你要问的类的名字, 
比如<code class="language-plaintext highlighter-rouge">ri String</code>). 不要紧张, 这可不是什么让你穿上宇航服, 
啪地一下把你打到太空中去开拖拉机的艰难的活. (笑) 
这简直就像是最温柔的耳边细语, 告诉你这个类的特性.</p>

<p>但是你想要类的方法(class method)的信息? 没问题: 
<code class="language-plaintext highlighter-rouge">ri Class::method</code>. (比如<code class="language-plaintext highlighter-rouge">ri "Nokogiri::HTML::parse"</code>)</p>

<p>你想要类的实例的方法(instance methods)的信息? 没问题: 
<code class="language-plaintext highlighter-rouge">ri Class#method</code>. (比如<code class="language-plaintext highlighter-rouge">ri "String#to_i"</code>)</p>

<p>(等等, 如果你是一个新手的话, 还不知道什么是类, 什么是实例. 
那我建议去读<code class="language-plaintext highlighter-rouge">_why</code>的书, 也许我会继续翻译. 这里给一个很形式的说法: 
类的方法<code class="language-plaintext highlighter-rouge">Class.method(arg)</code>是这样调用的, 类的实例的方法是
<code class="language-plaintext highlighter-rouge">instance.method(arg</code>这样调用的. 
类的实例是<code class="language-plaintext highlighter-rouge">instance = Class.new</code>这样生成的, 
<code class="language-plaintext highlighter-rouge">new</code>是一个类的方法, 返回类的一个新的实例. )</p>

<p>假如你想要全部的类的信息, 比如说来一个清单, 列出所有的可查的类, 
没问题, <code class="language-plaintext highlighter-rouge">ri -l</code> (<code class="language-plaintext highlighter-rouge">-l</code>对应的是<code class="language-plaintext highlighter-rouge">--list</code>). (唯一的问题是, 
可能你会得到一个又长又长的列表, 估计可以从珠穆朗玛峰列到地心. )</p>

<p>是不是觉得命令行里面看到的纯文本格式不太好看? 没问题, 
你可以选择输出<code class="language-plaintext highlighter-rouge">HTML</code>格式:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ri -Tf html String#gsub &gt; gsub.html
</code></pre></div></div>

<p><strong>或者可以用彩色格式输出</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ri -Tf ansi String#gsub
</code></pre></div></div>

<p>(这个的输出就会一下子输出所有的<code class="language-plaintext highlighter-rouge">ri</code>文档, 这个的效果不是很友好. )</p>

<h3 id="into-the-ri-switchboard">Into the Ri Switchboard</h3>
<p>走进<code class="language-plaintext highlighter-rouge">ri</code>.</p>

<p><code class="language-plaintext highlighter-rouge">ri</code>之所以能够如此美妙地用人话, 
轻松地来解释这些你以为可能会奇怪的程序语言, 
是离不开Dave Thomas最初的贡献的. 
(Dave Thomas是Programming Ruby的作者, 
同时也是在美国的<code class="language-plaintext highlighter-rouge">ruby</code>的推广者, 
许多的<code class="language-plaintext highlighter-rouge">ri</code>中的精心撰写的文字实际上就是部分直接来源于
Programming Ruby. 不要忘了常常谢谢Dave. )</p>

<p>(学一点历史很重要, 不仅在物理里, 在计算机里也很重要. )</p>

<p><code class="language-plaintext highlighter-rouge">ri</code>的那些优雅的文档实际上就是从<code class="language-plaintext highlighter-rouge">ruby</code>的源代码中生成的.</p>

<p>(不过我发现<code class="language-plaintext highlighter-rouge">_why</code>选择的例子已经没了, 因为试一试就知道了. 
那为什么不换一个呢? 因为我觉得没必要, 不要被例子限制了你的想象. 
实际上例子的形式很好的. 重点是形式. )</p>

<p>假如有这么样的代码在<code class="language-plaintext highlighter-rouge">ruby</code>的<code class="language-plaintext highlighter-rouge">date</code>类里面:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Get the time of this date as [hours, minutes, seconds,</span>
<span class="c1"># fraction_of_a_second]</span>
<span class="k">def</span> <span class="nf">time</span><span class="p">()</span> <span class="nb">self</span><span class="p">.</span><span class="nf">class</span><span class="p">.</span><span class="nf">day_fraction_to_time</span><span class="p">(</span><span class="n">day_fraction</span><span class="p">)</span> <span class="k">end</span>

<span class="c1"># Get the hour of this date.</span>
<span class="k">def</span> <span class="nf">hour</span><span class="p">()</span> <span class="n">time</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">end</span>

<span class="c1"># Get the minute of this date.</span>
<span class="k">def</span> <span class="nf">min</span><span class="p">()</span> <span class="n">time</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">end</span>
</code></pre></div></div>

<p>然后在终端里面我们输入: <code class="language-plaintext highlighter-rouge">ri Date#time</code></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-------------------------------------------------------------- Date#time
     time()
------------------------------------------------------------------------
     Get the time of this date as [hours, minutes, seconds,
     fraction_of_a_second]
</code></pre></div></div>
<p><code class="language-plaintext highlighter-rouge">ri</code>会自动处理并帮你生成对方法的工作原理的一些解释, 
但是它实际上是希望编写代码的作者最好留下一点注释
来解释一下自己的代码. 最好的建议就是, 在每一次你写代码的时候, 
当你定义了类或方法的时候, 最好加上在前面加上一点点的简短的描述, 
然后在以后就可以生成<code class="language-plaintext highlighter-rouge">ri</code>的文档来方便阅读和理解.</p>

<p>(深有感触, 感觉没有注释的代码读起来真的很累, 明明是自己昨天才写的, 
今天读起来就跟读天书一样… 并且注释可以直接变成文档, 
这个想法还可以直接就减少写文档的工作量, 妙啊. )</p>

<p>你可以用一些特殊的记号来让你自己的描述的格式更加的好看. 举个例子, 
如果你在自己的代码的注释里面用<code class="language-plaintext highlighter-rouge">*</code>或者<code class="language-plaintext highlighter-rouge">-</code>开始的话, 
在输出的文档(HTML)里面你就可以看到很好看的(无序)列表格式.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Get the time of this date as an Array of:</span>
<span class="c1"># * hours</span>
<span class="c1"># * minutes</span>
<span class="c1"># * seconds</span>
<span class="c1"># * fraction_of_a_second</span>
<span class="k">def</span> <span class="nf">time</span><span class="p">()</span> <span class="nb">self</span><span class="p">.</span><span class="nf">class</span><span class="p">.</span><span class="nf">day_fraction_to_time</span><span class="p">(</span><span class="n">day_fraction</span><span class="p">)</span> <span class="k">end</span>
</code></pre></div></div>

<p>还有其他的一些简单的例子: 假如想要有序号的列表的话, 就可以用
<code class="language-plaintext highlighter-rouge">1.</code>开头(也就是用数字加上一个点号开头). 强调的文字被<code class="language-plaintext highlighter-rouge">_</code>下划线包围,
加粗的文字被<code class="language-plaintext highlighter-rouge">*</code>星号包围, (行)代码被<code class="language-plaintext highlighter-rouge">+</code>包围, 
样例就是简单的一块带缩进的文本
(或者说是加上缩进就会用像<code class="language-plaintext highlighter-rouge">markdown</code>里面的代码块的形式显示).</p>

<p>下面是<code class="language-plaintext highlighter-rouge">_why</code>的项目<code class="language-plaintext highlighter-rouge">RedCloth</code>里面的一段代码:</p>

<p>(钩沉: 可以在<code class="language-plaintext highlighter-rouge">github</code>上看到<code class="language-plaintext highlighter-rouge">_why</code>的镜像. 哇, 不愧是<code class="language-plaintext highlighter-rouge">_why</code>神, 
有口皆碑, 他的镜像的名字叫做
<strong>A mirror of _why’s executable poetry</strong>, 
诗一样的代码. )</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#</span>
<span class="c1"># Returns a new RedCloth object, based on +String+ and</span>
<span class="c1"># enforcing all the included +restrictions+.</span>
<span class="c1">#</span>
<span class="c1">#   r = RedCloth.new( "h1. A &lt;b&gt;bold&lt;/b&gt; man", [:filter_html] )</span>
<span class="c1">#   r.to_html</span>
<span class="c1">#     #=&gt;"&lt;h1&gt;A &amp;amp;lt;b&amp;amp;gt;bold&amp;amp;lt;/b&amp;amp;gt; man&lt;/h1&gt;"</span>
<span class="c1">#</span>
<span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span> <span class="n">string</span><span class="p">,</span> <span class="n">restrictions</span> <span class="o">=</span> <span class="p">[]</span> <span class="p">)</span>
    <span class="vi">@lite</span> <span class="o">=</span> <span class="kp">false</span>
    <span class="n">restrictions</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">r</span><span class="o">|</span> <span class="nb">method</span><span class="p">(</span> <span class="s2">"</span><span class="si">#{</span> <span class="n">r</span> <span class="si">}</span><span class="s2">="</span> <span class="p">).</span><span class="nf">call</span><span class="p">(</span> <span class="kp">true</span> <span class="p">)</span> <span class="p">}</span>
    <span class="k">super</span><span class="p">(</span> <span class="n">string</span> <span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>

<p>(这段代码是<code class="language-plaintext highlighter-rouge">initialize</code>方法的一部分, 注意这里的缩进的部分, 
实际上就是样例部分, 可以说是很简单了. )</p>

<p>欲知后事, 速来读<strong>RDoc</strong>的<strong>Markup</strong>章节. 
(这里给出<code class="language-plaintext highlighter-rouge">_why</code>的
<a href="http://rdoc.sourceforge.net/doc/files/README.html">链接</a>
, 目前还是可以用的. )</p>

<h3 id="pushing-out-your-own-ri">Pushing Out Your Own Ri</h3>
<p>发布你自己的<code class="language-plaintext highlighter-rouge">ri</code>文档(<code class="language-plaintext highlighter-rouge">RDoc</code>).</p>

<p>虽然<code class="language-plaintext highlighter-rouge">ri</code>不会自动地生成, 但是你可以通过告诉它在你需要在哪里启动, 
然后它就会很贴心地运行了, 只要两步:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd ~/cvs/your-code
</code></pre></div></div>
<p>首先把你的目录切换到你的(项目)代码所在的文件夹
(一个项目一个文件夹有一个好处就是可以防止文件混乱).</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rdoc --ri-site
</code></pre></div></div>
<p>接下来利用<code class="language-plaintext highlighter-rouge">rdoc</code>工具就可以生成<code class="language-plaintext highlighter-rouge">rdoc</code>信息, 
接下来你就可以<code class="language-plaintext highlighter-rouge">ri YourClass</code>来看到你的<code class="language-plaintext highlighter-rouge">rdoc</code>文档了.</p>

<p>或者你可以直接通过</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rdoc
</code></pre></div></div>
<p>来直接生成<code class="language-plaintext highlighter-rouge">HTML</code>的文件, 
你可以通过查看<code class="language-plaintext highlighter-rouge">index.html</code>来看看自己的好东西.</p>

<p>当你看到这行字的时候, 恭喜你, 你已经踏进<code class="language-plaintext highlighter-rouge">ruby</code>的世界了.</p>

<p><img src="https://poignant.guide/images/tigers.vest-4.gif" alt="the tiger finds a new home and learns to eventually move on" /></p>

<h3 id="本章后记">本章后记</h3>
<p>不知道<code class="language-plaintext highlighter-rouge">_why</code>前面的漫画有没有什么用意, 
我觉得可能是为了说: 
看我们的<code class="language-plaintext highlighter-rouge">irb</code>, 就和激冻枪一样强力; 
但是假如没有好的文档的话, 我们可能就像是瞎来的老虎一样, 
所以 <strong>let us move on into the ruby world</strong> :p.</p>

  </div><a class="u-url" href="/ruby/why's_(poignant)_guide_to_ruby/why's-poignant-guide/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">My Blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">My Blog</li><li><a class="u-email" href="mailto:thebigbigwordl@qq.com">thebigbigwordl@qq.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/li-yiyang"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">li-yiyang</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>某不知名的很硬的双非学校的物理系学生的无聊博客</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
